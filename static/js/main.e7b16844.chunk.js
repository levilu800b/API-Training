(this.webpackJsonpquote=this.webpackJsonpquote||[]).push([[0],{23:function(t,e,n){},24:function(t,e,n){},43:function(t,e,n){"use strict";n.r(e);var s=n(0),i=n(2),o=n.n(i),u=n(14),a=n.n(u),r=(n(23),n(3)),c=n(4),h=n(17),l=n(16),d=(n(24),n(15)),j=n.n(d),f=function(){function t(){Object(r.a)(this,t)}return Object(c.a)(t,[{key:"status",value:function(t){return t.status>=200&&t.status<300?Promise.resolve(t):Promise.reject(new Error(t.statusText))}},{key:"getquoteByAuthor",value:function(t){return this.getRequest("https://api.quotable.io/quotes?authorId=".concat(t))}},{key:"getAuthors",value:function(t,e){return this.getRequest("https://api.quotable.io/authors?skip=".concat(t,"&limit=").concat(e))}},{key:"getQuote",value:function(){return this.getRequest("https://api.quotable.io/random")}},{key:"getRequest",value:function(t){return j.a.get(t).then(this.status).catch((function(t){console.error(t),alert(t)}))}}]),t}(),b=function(t){Object(h.a)(n,t);var e=Object(l.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).state={content:"",author:"",tags:[],fetching:!1,authors:[],lastItemIndex:0,pageSize:20,authorId:void 0},s.apiClient=new f,s}return Object(c.a)(n,[{key:"updateQuote",value:function(t){this.setState({content:t.content,author:t.author,tags:t.tags})}},{key:"refreshQuote",value:function(){var t=this;this.setState({content:"....loading",author:"",tags:[],fetching:!0}),this.state.authorId?this.apiClient.getquoteByAuthor(this.state.authorId).then((function(e){t.updateQuote(e.data.results[Math.floor(Math.random()*e.data.count)])})).finally((function(){t.setState({fetching:!1})})):this.apiClient.getQuote().then((function(e){t.updateQuote(e.data)})).finally((function(){t.setState({fetching:!1})}))}},{key:"listAuthors",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e<0&&(e=0),this.apiClient.getAuthors(e,this.state.pageSize).then((function(e){t.updateAuthors(e.data)}))}},{key:"updateAuthors",value:function(t){var e=t.results.map((function(t){return console.log(t),{name:t.name,count:t.quoteCount,id:t._id}}));this.setState({authors:e,lastItemIndex:t.lastItemIndex})}},{key:"refreshAuthors",value:function(t){t?this.listAuthors(this.state.lastItemIndex):this.listAuthors(this.state.lastItemIndex-2*this.state.pageSize)}},{key:"refreshPagination",value:function(t){var e=this;this.setState({pageSize:t.target.value},(function(){return e.listAuthors()}))}},{key:"selectAuthor",value:function(t){var e=this;this.selectState({authorId:t},(function(){return e.refreshQuote()}))}},{key:"makeAuthorTable",value:function(){var t=this;return this.state.authors.map((function(e,n){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{style:{backgroundColor:e.id===t.state.authorId?"green":""},children:Object(s.jsx)("a",{onClick:function(){return t.selectAuthor(e.id)},children:e.name})}),Object(s.jsx)("td",{children:e.count})]},n)}))}},{key:"componentDidMount",value:function(){this.refreshQuote(),this.listAuthors()}},{key:"render",value:function(){var t=this;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{children:"Quote of the day"}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"Content:"})," ",this.state.content," "]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"Author:"})," ",this.state.author," "]}),Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:"Tags:"})," ",this.state.tags.join(", ")]}),Object(s.jsx)("button",{disabled:this.state.fetching,onClick:function(){return t.refreshQuote()},children:"New Quote"}),Object(s.jsxs)("table",{children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Name"}),Object(s.jsx)("th",{children:"No of quotes"})]})}),Object(s.jsx)("tbody",{children:this.makeAuthorTable()})]}),Object(s.jsx)("button",{onClick:function(){return t.refreshAuthors(!1)},children:"Previous"}),Object(s.jsx)("button",{onClick:function(){return t.refreshAuthors(!0)},children:"Next"}),Object(s.jsx)("br",{}),"Page size ",Object(s.jsx)("br",{}),Object(s.jsxs)("select",{onChange:function(e){return t.refreshPagination(e)},value:this.state.pageSize,children:[Object(s.jsx)("option",{value:"10",children:"10"}),Object(s.jsx)("option",{value:"20",children:"20"}),Object(s.jsx)("option",{value:"30",children:"30"})]})]})}}]),n}(o.a.Component),g=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(e){var n=e.getCLS,s=e.getFID,i=e.getFCP,o=e.getLCP,u=e.getTTFB;n(t),s(t),i(t),o(t),u(t)}))};a.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(b,{})}),document.getElementById("root")),g()}},[[43,1,2]]]);
//# sourceMappingURL=main.e7b16844.chunk.js.map